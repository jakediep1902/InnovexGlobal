<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Innovex Global</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="logo">
            <img src="images/logo.jpg" alt="Innovex Global">
        </div>
        <nav class="nav-menu">
            <ul>
                <li><a href="index.html">üè† Trang ch·ªß</a></li>
                <li><a href="sanpham.html">üõí S·∫£n ph·∫©m</a></li>
                <li><a href="lienhe.html">üìû Li√™n h·ªá</a></li>
            </ul>
        </nav>
        <a href="tel:+84849496767" class="call-button">üìû G·ªçi ngay</a>
    </header>

    <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Innovex Global</h1>
    <p>Gi·∫£i ph√°p c√¥ng ngh·ªá v√† xu·∫•t kh·∫©u</p>

    <div class="product-container">
        <!-- <div class="product" id="1" data-name="Fresh Ginger">
            <img src="https://images.unsplash.com/photo-1573414405995-2012861b74e0?q=80&w=600&auto=format&fit=crop" alt="G·ª´ng T∆∞∆°i">
            <h3>G·ª´ng T∆∞∆°i</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div> -->
    
        <!-- <div class="product" id="2" data-name="black pepper">
            <img src="https://static.kinhtedothi.vn/images/upload/2021/12/19/ea4a7274-efa1-47e9-b6dd-c23799707242.jpg" alt="Ti√™u ƒêen">
            <h3>Ti√™u ƒêen</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div>
    
        <div class="product" id="3" data-name="garlic">
            <img src="https://product.hstatic.net/1000178034/product/toi_cu_to_-_1kg_370a8b9654914afca274dd65eff74c08_4761b715a06d4d0b829d2e54689d170d_master.jpg" alt="T·ªèi">
            <h3>T·ªèi</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div>
    
        <div class="product" id="4" data-name="chili">
            <img src="https://suckhoedoisong.qltns.mediacdn.vn/2015/1-ot-cay-1424484052730.jpg" alt="·ªöt T∆∞∆°i">
            <h3>·ªöt T∆∞∆°i</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div>
    
        <div class="product" id="5" data-name="banana">
            <img src="https://giongchuoicaymo.com/wp-content/uploads/2021/05/chuoi-laba-da-lat-428-1.jpg" alt="Chu·ªëi">
            <h3>Chu·ªëi</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div>
    
        <div class="product" id="6" data-name="cacao">
            <img src="https://villagecacao.com/uploads/shops/2021_04/cacao.jpg" alt="Ca Cao">
            <h3>Ca Cao</h3>
            <p class="price">Gi√°: ƒêang t·∫£i...</p>
        </div>  -->
    </div>
    
    <footer>
        
        <a href="#" onclick="checkAdminPassword()">üîë ADMIN</a>
    </footer>
    <footer>
        <p>&copy; 2024 InnovexGlobal. All rights reserved.</p>
    </footer>

    <!-- <script>
        async function getPrice() {
            const url = "https://1c2026.playfabapi.com/Admin/GetTitleData";
            const secretKey = "JJBYCPBIWIIQM6QRHIXFGI8NDOY5DSDNH5T1HAI1WBRUJ3CURS"; // Thay b·∫±ng Secret Key c·ªßa b·∫°n

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-SecretKey": secretKey
                    },
                    body: JSON.stringify({})
                });

                const result = await response.json();
                console.log("Response:", result);

                if (response.ok && result.data && result.data.Data) {
                    let productData = result.data.Data; // L·∫•y d·ªØ li·ªáu s·∫£n ph·∫©m t·ª´ API

                    document.querySelectorAll(".product").forEach(product => {
                        let productName = product.getAttribute("data-name"); // L·∫•y t√™n s·∫£n ph·∫©m t·ª´ `data-name`
                        if (productData[productName]) {
                            product.querySelector(".price").innerText = `Gi√°: ${productData[productName]} VNƒê/kg`;
                        } else {
                            product.querySelector(".price").innerText = "Gi√°: Kh√¥ng c√≥ s·∫µn";
                        }
                    });
                } else {
                    document.querySelectorAll(".price").forEach(p => p.innerText = "Gi√°: Kh√¥ng th·ªÉ t·∫£i");
                }
            } catch (error) {
                console.error("Error:", error);
                document.querySelectorAll(".price").forEach(p => p.innerText = "Gi√°: L·ªói t·∫£i d·ªØ li·ªáu");
            }
        }

        document.addEventListener("DOMContentLoaded", getPrice);

        function checkAdminPassword() {
        let password = prompt("Nh·∫≠p m·∫≠t kh·∫©u ADMIN:");
        if (password === "123456") {  // üîë Thay "123456" b·∫±ng m·∫≠t kh·∫©u th·ª±c t·∫ø
            window.location.href = "admin.html";
        } else if (password !== null) {
            alert("Sai m·∫≠t kh·∫©u! Vui l√≤ng th·ª≠ l·∫°i.");
        }
    }
    </script> -->

<script>

const titleID = "1522DF"
const secretKey = "MWDS187QTJODWIYBH3B4U4BOHGQ97Y8AWZPGK9YKK66PZEDAZN"; // üî¥ THAY TH·∫æ B·∫∞NG SECRET KEY C·ª¶A B·∫†N

function checkAdminPassword() {
    const passwordKey = "admin_password_verified";
    const expirationMinutes = 10; // ‚è≥ Kho·∫£ng th·ªùi gian y√™u c·∫ßu nh·∫≠p l·∫°i m·∫≠t kh·∫©u (ƒë∆°n v·ªã: ph√∫t)

    const lastVerifiedTime = localStorage.getItem(passwordKey);
    const currentTime = new Date().getTime();

    // N·∫øu ƒë√£ x√°c th·ª±c tr∆∞·ªõc ƒë√≥ v√† ch∆∞a h·∫øt h·∫°n
    if (lastVerifiedTime && currentTime - lastVerifiedTime < expirationMinutes * 60 * 1000) {
        window.location.href = "admin.html";
        return;
    }

    // Y√™u c·∫ßu nh·∫≠p m·∫≠t kh·∫©u n·∫øu ch∆∞a c√≥ ho·∫∑c ƒë√£ h·∫øt h·∫°n
    let password = prompt("Nh·∫≠p m·∫≠t kh·∫©u ADMIN:");
    if (password === "123456") {  // üîë Thay "123456" b·∫±ng m·∫≠t kh·∫©u th·ª±c t·∫ø
        localStorage.setItem(passwordKey, currentTime); // L∆∞u th·ªùi gian x√°c th·ª±c
        window.location.href = "admin.html";
    } else if (password !== null) {
        alert("Sai m·∫≠t kh·∫©u! Vui l√≤ng th·ª≠ l·∫°i.");
    }
}

   // Danh s√°ch s·∫£n ph·∫©m ƒë√£ hi·ªÉn th·ªã
const currentProducts = new Set();

// Danh s√°ch h√¨nh ·∫£nh s·∫£n ph·∫©m
const productImages = {
    banana: "https://giongchuoicaymo.com/wp-content/uploads/2021/05/chuoi-laba-da-lat-428-1.jpg",
    cacao: "https://villagecacao.com/uploads/shops/2021_04/cacao.jpg",
    ginger: "https://images.unsplash.com/photo-1573414405995-2012861b74e0?q=80&w=600&auto=format&fit=crop",
    garlic: "https://product.hstatic.net/1000178034/product/toi_cu_to_-_1kg_370a8b9654914afca274dd65eff74c08_4761b715a06d4d0b829d2e54689d170d_master.jpg",
    pepper: "https://static.kinhtedothi.vn/images/upload/2021/12/19/ea4a7274-efa1-47e9-b6dd-c23799707242.jpg",
    chili: "https://suckhoedoisong.qltns.mediacdn.vn/2015/1-ot-cay-1424484052730.jpg",
    thancui: "https://lh3.googleusercontent.com/pw/AP1GczOHKYKYFGrWEOlXMYE54hjwj6vG9NTLAn3vJ3iOFI2MhAezzBLiFowG6aa4rlqyIppxg0m8ex573BVdWA_2DIcF2Vro5OjgIPAz5VF5ltZT_0khmRi9IOM4iukJNKjnFFbgr32WcZYEFy8D08PRqwhX=w1260-h945-s-no-gm?authuser=0",
    vanep:"https://scontent.fsgn2-7.fna.fbcdn.net/v/t39.30808-6/457224960_495698036796149_7733101225166612730_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=6AcosORhPEMQ7kNvgFTHXhC&_nc_oc=AdirrUilvJ_l_DGd3glUAAh-COkJ4kxk-FikXWgqUrN48nlqnL020VEAxcLmTtzsh7GQuqV5QFqbaXucD8fSbMiD&_nc_zt=23&_nc_ht=scontent.fsgn2-7.fna&_nc_gid=cmk3CCTz9gsaiM0u72NvEw&oh=00_AYGgYaD9j3eyTsS44TKFlEeVFUCCGrzGJRc0rL9etOnq2w&oe=67DD75F6"
};

// H√†m g·ªçi PlayFab API ƒë·ªÉ l·∫•y d·ªØ li·ªáu s·∫£n ph·∫©m
async function getPrice() {
    const url = `https://${titleID}.playfabapi.com/Admin/GetTitleData`;
    

    try {
        const response = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-SecretKey": secretKey
            },
            body: JSON.stringify({})
        });

        const result = await response.json();
        console.log("üì° D·ªØ li·ªáu t·ª´ PlayFab:", result);

        if (response.ok) {
            updateProductList(result.data.Data);
        } else {
            console.error("‚ùå L·ªói t·∫£i d·ªØ li·ªáu:", result.errorMessage);
        }
    } catch (error) {
        console.error("‚ùå L·ªói k·∫øt n·ªëi:", error);
    }
}


// H√†m c·∫≠p nh·∫≠t s·∫£n ph·∫©m tr√™n giao di·ªán
function updateProductList(data) {
    const productList = document.querySelector(".product-container"); // Ch·ªçn container ch·ª©a t·∫•t c·∫£ s·∫£n ph·∫©m

    if (!productList) {
        console.error("‚ùå L·ªñI: Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ .product-container!");
        return;
    }

    for (const key in data) {
        if (data.hasOwnProperty(key)) {
            try {
                const productData = JSON.parse(data[key]); // Chuy·ªÉn ƒë·ªïi t·ª´ chu·ªói JSON sang object
                
                //const price = productData.price || "ƒêang c·∫≠p nh·∫≠t";
                const price = (productData.price !== undefined && Number(productData.price) > 0) 
    ? productData.price 
    : "ƒêang c·∫≠p nh·∫≠t";

                console.log("####################",price)
                //if (Number(price) < 0) continue;

                const imageUrl = productData.image || "https://via.placeholder.com/150"; // URL ·∫£nh t·ª´ d·ªØ li·ªáu
                const productName = key.charAt(0).toUpperCase() + key.slice(1); // Vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu

                let existingProduct = document.querySelector(`.product[data-name="${key}"]`);

                if (existingProduct) {
                    console.log("üîÑ C·∫≠p nh·∫≠t s·∫£n ph·∫©m:", key);
                    // C·∫≠p nh·∫≠t gi√°
                    existingProduct.querySelector(".price").innerText = `Gi√°: ${price} VNƒê/kg`;
                    // C·∫≠p nh·∫≠t h√¨nh ·∫£nh
                    existingProduct.querySelector("img").src = imageUrl;
                } else {
                     
                    console.log("‚ûï T·∫°o s·∫£n ph·∫©m m·ªõi:", key);
                    // T·∫°o s·∫£n ph·∫©m m·ªõi n·∫øu ch∆∞a c√≥
                    const productDiv = document.createElement("div");
                    productDiv.classList.add("product");
                    productDiv.dataset.name = key;
                    productDiv.innerHTML = `
                        <img src="${imageUrl}" alt="${productName}">
                        <h3>${productName}</h3>
                        <p class="price">Gi√°: ${price} VNƒê/kg</p>
                    `;
                    productList.appendChild(productDiv);
                }
            } catch (error) {
                console.error(`‚ùå L·ªói khi x·ª≠ l√Ω s·∫£n ph·∫©m "${key}":`, error);
            }
        }
    }
}


// G·ªçi h√†m khi trang t·∫£i
document.addEventListener("DOMContentLoaded", () => {
    getPrice();
    setInterval(getPrice, 50000); // C·∫≠p nh·∫≠t gi√° m·ªói 50 gi√¢y
});





</script>

</body>
</html>
