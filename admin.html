<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - C·∫≠p Nh·∫≠t Gi√°</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <h1>üîß Qu·∫£n l√Ω gi√° s·∫£n ph·∫©m</h1>
    </header>

    <main>
        <form id="updatePriceForm">
            <label for="productName">T√™n s·∫£n ph·∫©m:</label>
            <input type="text" id="productName" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." required>

            <label for="newPrice">Gi√° m·ªõi (VNƒê/kg):</label>
            <input type="number" id="newPrice" placeholder="Nh·∫≠p gi√° m·ªõi..." required>

            <button type="submit">C·∫≠p Nh·∫≠t Gi√°</button>
        </form>

        <p id="statusMessage"></p>
    </main>

    <footer>
        <a href="index.html">üè† Quay l·∫°i trang ch·ªß</a>
    </footer>

    <script>
        document.getElementById("updatePriceForm").addEventListener("submit", async function(event) {
            event.preventDefault(); // NgƒÉn ch·∫∑n reload trang

            const url = "https://1c2026.playfabapi.com/Admin/SetTitleData";
            const secretKey = "JJBYCPBIWIIQM6QRHIXFGI8NDOY5DSDNH5T1HAI1WBRUJ3CURS"; // Thay b·∫±ng Secret Key c·ªßa b·∫°n

            const productName = document.getElementById("productName").value.trim();
            const newPrice = document.getElementById("newPrice").value.trim();
            const statusMessage = document.getElementById("statusMessage");

            if (!productName || !newPrice) {
                statusMessage.innerText = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!";
                statusMessage.style.color = "red";
                return;
            }

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-SecretKey": secretKey
                    },
                    body: JSON.stringify({
                        "Key": productName,
                        "Value": newPrice
                    })
                });

                const result = await response.json();
                console.log("Response:", result);

                if (response.ok) {
                    statusMessage.innerText = `‚úÖ Gi√° c·ªßa "${productName}" ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh ${newPrice} VNƒê/kg`;
                    statusMessage.style.color = "green";
                } else {
                    statusMessage.innerText = `‚ùå L·ªói: ${result.errorMessage || "Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t gi√°"}`;
                    statusMessage.style.color = "red";
                }
            } catch (error) {
                console.error("Error:", error);
                statusMessage.innerText = "‚ùå L·ªói k·∫øt n·ªëi!";
                statusMessage.style.color = "red";
            }
        });
    </script>
</body>
</html>
